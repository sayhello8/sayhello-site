class d{constructor(e){const o=document.createElement("div");o.style.cssText="position:absolute; bottom:35px; width:80px; height:80px; background:rgba(126, 126, 126, 0.5); border:#444 solid medium; border-radius:50%; left:50%; transform:translateX(-50%);";const t=document.createElement("div");if(t.style.cssText="position: absolute; left: 20px; top: 20px; width: 40px; height: 40px; border-radius: 50%; background: #fff;",o.appendChild(t),document.body.appendChild(o),this.domElement=t,this.maxRadius=e.maxRadius||40,this.maxRadiusSquared=this.maxRadius*this.maxRadius,this.onMove=e.onMove,this.game=e.game,this.origin={left:this.domElement.offsetLeft,top:this.domElement.offsetTop},this.rotationDamping=e.rotationDamping||.06,this.moveDamping=e.moveDamping||.01,this.onStart=e.onStart||null,this.onEnd=e.onEnd||null,this.domElement!=null){const i=this;"ontouchstart"in window?this.domElement.addEventListener("touchstart",function(n){n.preventDefault(),i.tap(n),n.stopPropagation()}):this.domElement.addEventListener("mousedown",function(n){n.preventDefault(),i.tap(n),n.stopPropagation()})}}getMousePosition(e){let o=e.targetTouches?e.targetTouches[0].pageX:e.clientX,t=e.targetTouches?e.targetTouches[0].pageY:e.clientY;return{x:o,y:t}}tap(e){e=e||window.event,this.offset=this.getMousePosition(e);const o=this;this.onStart&&this.onStart.call(this.game),"ontouchstart"in window?(document.ontouchmove=function(t){t.preventDefault(),o.move(t)},document.ontouchend=function(t){t.preventDefault(),o.up(t)}):(document.onmousemove=function(t){t.preventDefault(),o.move(t)},document.onmouseup=function(t){t.preventDefault(),o.up(t)})}move(e){e=e||window.event;const o=this.getMousePosition(e);let t=o.x-this.offset.x,i=o.y-this.offset.y;const n=t*t+i*i;if(n>this.maxRadiusSquared){const s=Math.sqrt(n);t/=s,i/=s,t*=this.maxRadius,i*=this.maxRadius}this.domElement.style.top=`${i+this.domElement.clientHeight/2}px`,this.domElement.style.left=`${t+this.domElement.clientWidth/2}px`;const a=-(i-this.origin.top+this.domElement.clientHeight/2)/this.maxRadius,m=(t-this.origin.left+this.domElement.clientWidth/2)/this.maxRadius;this.onMove!=null&&this.onMove.call(this.game,a,m)}up(e){"ontouchstart"in window?(document.ontouchmove=null,document.touchend=null):(document.onmousemove=null,document.onmouseup=null),this.domElement.style.top=`${this.origin.top}px`,this.domElement.style.left=`${this.origin.left}px`,this.onMove.call(this.game,0,0),this.onEnd&&this.onEnd.call(this.game)}destroy(){}}export{d as J};
